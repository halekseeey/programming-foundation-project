{% extends "base.html" %}

{% block content %}
<main class="px-6 py-8 max-w-[900px] mx-auto space-y-10">
    <header class="gap-4 flex justify-between">
        <div class="flex flex-col gap-2">
            <h1 class="text-3xl font-bold tracking-tight">EU Renewable Energy Explorer</h1>
            <p class="text-sm text-slate-400">
                Flask + Python analytics (pandas, numpy, matplotlib, seaborn, plotly) with Flask Web App.
            </p>
        </div>
    </header>

    <!-- Merged Dataset Analysis Container -->
    <div id="merged-dataset-analysis-container">
        <div class="bg-slate-900/60 border border-slate-800 rounded-2xl p-6">
            <p class="text-slate-400">Loading merged dataset analysis...</p>
        </div>
    </div>

    <!-- Loading State -->
    <section id="loading-section" class="bg-slate-900/60 border border-slate-800 rounded-2xl p-6 space-y-4">
        <div class="flex items-center justify-center py-4">
            <div class="text-center space-y-2">
                <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-sky-500"></div>
                <p class="text-sm text-slate-400">Loading analysis data...</p>
            </div>
        </div>
    </section>

    <!-- Dashboard Section -->
    <section id="dashboard-container" class="space-y-6"></section>

    <!-- Analysis Section -->
    <section id="analysis-section" class="space-y-6" style="display: none;">
        <h2 class="text-2xl font-bold tracking-tight">Data Analysis</h2>

        <div class="space-y-6">
            <!-- Global Trends -->
            <div id="global-trends-container"></div>

            <!-- Energy Sources Comparison -->
            <div id="energy-sources-container"></div>

            <!-- Regions Ranking -->
            <div id="regions-ranking-container"></div>

            <!-- Correlation Analysis -->
            <div id="correlation-analysis-container"></div>

            <!-- Additional Visualizations -->
            <div id="additional-visualizations-container"></div>

            <!-- Forecast Section -->
            <div id="forecast-container"></div>
        </div>
    </section>

    <!-- Filters and Filtered Analysis Section -->
    <section class="space-y-6">
        <h2 class="text-2xl font-bold tracking-tight">Interactive Exploration</h2>
        <p class="text-sm text-slate-400">
            Select a region or energy type to explore detailed analysis and trends.
        </p>
        
        <!-- Filters Section -->
        <div id="filters-container" class="space-y-6"></div>
        
        <!-- Filtered Analysis Results -->
        <div id="filtered-analysis-container" class="space-y-6" style="display: none;">
            <h3 class="text-xl font-semibold">Filtered Analysis Results</h3>
            <div id="filtered-charts-container" class="space-y-6"></div>
        </div>
    </section>
</main>

<!-- Dataset Preview Modal -->
<div
    id="dataset-preview-modal"
    class="fixed inset-0 bg-black/60 backdrop-blur-sm z-50 hidden items-center justify-center"
    style="display: none;"
>
    <div class="bg-slate-900 border border-slate-800 rounded-2xl p-6 max-w-5xl w-full mx-4 max-h-[90vh] flex flex-col">
        <div class="flex items-center justify-between mb-4">
            <h2 class="text-xl font-semibold">Dataset Preview: Merged Dataset</h2>
            <button
                id="close-preview-modal-btn"
                class="text-slate-400 hover:text-white transition-colors"
                aria-label="Close"
            >
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                >
                    <path d="M18 6L6 18" />
                    <path d="M6 6l12 12" />
                </svg>
            </button>
        </div>
        <div id="dataset-preview-container" class="flex-1 overflow-auto"></div>
    </div>
</div>
{% endblock %}

